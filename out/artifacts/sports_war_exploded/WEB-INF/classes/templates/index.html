<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¥åº·æ˜Ÿçƒ - ä½ çš„è¿åŠ¨æˆå°±ä¸–ç•Œ</title>
    <link href="/libs/bootstrap/5.3.0/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        /* ä¸»é¡µæ ·å¼ */
        .hero-section {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            padding: 100px 0 50px;
            position: relative;
            overflow: hidden;
        }

        .normal-theme {
            --primary-color: #00b09b;
            --secondary-color: #96c93d;
            --accent-color: #4cc9f0;
        }

        .normal-theme .hero-section {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        }

        .normal-theme .feature-section {
            background: linear-gradient(135deg, #e8f5e9, #c8e6c9);
        }

        .normal-theme .feature-card {
            background: rgba(255, 255, 255, 0.85);
            border: 2px solid var(--secondary-color);
        }

        .normal-theme .user-navbar {
            background: rgba(0, 176, 155, 0.85);
        }

        .normal-theme .footer {
            background: rgba(0, 176, 155, 0.85);
        }

        .normal-theme .badge-collection {
            background: rgba(150, 201, 61, 0.15);
        }

        .normal-theme .theme-toggle-btn {
            background: rgba(0, 176, 155, 0.8);
            border-color: #fff;
        }

        /* æ–°å¹´ä¸»é¢˜CSSå˜é‡å®šä¹‰ */
        .newyear-theme {
            --newyear-red: #ff6b6b;
            --newyear-pink: #ff9ff3;
            --newyear-gold: #feca57;
        }

        /* æ–°å¹´ä¸»é¢˜è½®æ’­å›¾æ ·å¼ */
        .newyear-theme .carousel-item {
            background: linear-gradient(135deg, var(--newyear-red) 0%, var(--newyear-gold) 50%, var(--newyear-pink) 100%);
        }

        /* ç‰¹å®šæ–°å¹´æ´»åŠ¨å¹»ç¯ç‰‡æ ·å¼ï¼ˆè¦†ç›–æ–°å¹´ä¸»é¢˜çš„é€šç”¨æ ·å¼ï¼‰ */
        .newyear-theme .new-year-slide,
        .new-year-slide {
            background: linear-gradient(135deg, #ff6b6b 0%, #feca57 50%, #ff9ff3 100%);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .theme-switcher {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1050;
        }

        .theme-toggle-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid white;
            color: white;
            border-radius: 50px;
            padding: 10px 20px;
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .theme-toggle-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }

        .theme-badge {
            margin-left: 8px;
            font-weight: bold;
        }


        /* å¾½ç« åº“æ ·å¼ */
        .badge-collection {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 2rem;
            margin-top: 2rem;
        }

        .badge-item {
            text-align: center;
            padding: 1rem;
            transition: all 0.3s ease;
        }

        .badge-item.owned {
            transform: scale(1.05);
        }

        /* åŠŸèƒ½åŒºåŸŸæ ·å¼ */
        .feature-section {
            padding: 5rem 0;
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 2rem;
            height: 100%;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .feature-card:hover {
            transform: translateY(-10px);
            border-color: var(--accent-color);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
        }

        .normal-theme .feature-card:hover {
            border-color: #96c93d;
        }

        .newyear-theme .feature-card:hover {
            border-color: var(--newyear-gold);
        }

        /* é¡µè„šæ ·å¼ */
        .footer {
            background: rgba(0, 0, 0, 0.3);
            padding: 3rem 0 1rem;
            margin-top: 5rem;
        }

        /* ç”¨æˆ·çŠ¶æ€æ æ ·å¼ */
        .user-navbar {
            background: rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            padding: 10px 0;
        }

        .user-info {
            display: flex;
            align-items: center;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 10px;
        }

        /* è¿”å›é¡¶éƒ¨æŒ‰é’® */
        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1030;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(67, 97, 238, 0.8);
            color: white;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .back-to-top.visible {
            opacity: 1;
        }

        .back-to-top:hover {
            background: rgba(67, 97, 238, 1);
            transform: translateY(-3px);
        }

        .badge-icon {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            font-size: 2rem;
            color: white;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
        }

        /* æ–°å¢å¾½ç« å¡ç‰‡æ ·å¼ */
        .badge-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
        }

        .badge-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
        }

        .badge-card.obtained {
            opacity: 1;
            background: rgba(40, 167, 69, 0.1) !important;
        }

        .badge-card.locked {
            opacity: 0.7;
        }

        .badge-icon-lg {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: white;
            margin: 0 auto 1rem;
        }

        .collection-header {
            background: linear-gradient(135deg, rgba(220, 53, 69, 0.1), rgba(255, 193, 7, 0.1));
        }

        .badge-hover-effect {
            transition: all 0.3s ease;
        }

        .badge-hover-effect:hover {
            transform: scale(1.05);
        }

        /* å¾½ç« å›¾ç‰‡æ ·å¼ - ç¡®ä¿å›¾ç‰‡åœ¨å®¹å™¨ä¸­æ­£ç¡®æ˜¾ç¤º */
        .badge-img {
            max-width: 100% !important;
            max-height: 100% !important;
            object-fit: cover !important;
            border-radius: 50% !important;
        }



        /* è½®æ’­å›¾æ ·å¼ */
        .carousel-item {
            height: 500px;
            background-size: cover;
            background-position: center;
        }

        .new-year-slide {
            background: linear-gradient(135deg, #ff6b6b 0%, #feca57 50%, #ff9ff3 100%);
        }

        .newyear-theme .hero-section {
            background: linear-gradient(135deg, var(--newyear-red), var(--newyear-pink));
        }

        .newyear-theme .feature-section {
            background: linear-gradient(135deg, #ffebee, #ffcdd2);
        }

        .newyear-theme .feature-card {
            background: rgba(255, 255, 255, 0.85);
            border: 2px solid var(--newyear-red);
        }

        .newyear-theme .user-navbar {
            background: rgba(211, 47, 47, 0.85);
        }

        .newyear-theme .footer {
            background: rgba(211, 47, 47, 0.85);
        }

        .newyear-theme .badge-collection {
            background: rgba(255, 202, 40, 0.15);
        }

        .newyear-theme .theme-toggle-btn {
            background: rgba(211, 47, 47, 0.8);
            border-color: #fff;
        }

        .countdown-timer {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .countdown-item {
            text-align: center;
            background: rgba(255, 255, 255, 0.2);
            padding: 0.5rem;
            border-radius: 0.5rem;
            min-width: 60px;
        }

        .countdown-value {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .countdown-label {
            font-size: 0.8rem;
            opacity: 0.9;
        }

        @media (max-width: 768px) {
            .carousel-item {
                height: 400px;
            }

            .countdown-item {
                min-width: 50px;
            }

            .countdown-value {
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body class="normal-theme">
<!-- é¡¶éƒ¨ç”¨æˆ·çŠ¶æ€æ  -->
<div class="user-navbar" th:classappend="${isLoggedIn} ? '' : 'd-none'" id="userNavbar">
    <div class="container">
        <div class="d-flex justify-content-between align-items-center">
            <div class="user-info">
                <img th:src="${currentUser != null and currentUser.avatar != null and currentUser.avatar != ''} ? ${currentUser.avatar} : '/images/avatar.png'" 
                     th:alt="${currentUser != null and currentUser.username != null} ? ${currentUser.username} + 'çš„å¤´åƒ' : 'ç”¨æˆ·å¤´åƒ'" class="user-avatar" id="userAvatar">
                <span class="text-white" th:text="${currentUser != null and currentUser.username != null} ? ${currentUser.username} : 'ç”¨æˆ·'" id="userName">ç”¨æˆ·</span>
            </div>
            <div>
                <a href="/" class="btn btn-sm btn-outline-light me-2">
                    <i class="fas fa-home me-1"></i>é¦–é¡µ
                </a>
                <a href="/dashboard" class="btn btn-sm btn-outline-light me-2">
                    <i class="fas fa-chart-line me-1"></i>æˆ‘çš„ä»ªè¡¨æ¿
                </a>
                <a href="/profile" class="btn btn-sm btn-outline-light me-2">
                    <i class="fas fa-user me-1"></i>ä¸ªäººèµ„æ–™
                </a>
                <a href="/achievements" class="btn btn-sm btn-outline-light me-2">
                    <i class="fas fa-trophy me-1"></i>æˆ‘çš„æˆå°±
                </a>
                <a href="/admin" class="btn btn-sm btn-outline-warning me-2" 
                   th:classappend="${currentUser != null and currentUser.isAdmin} ? '' : 'd-none'" 
                   id="adminPanelBtn">
                    <i class="fas fa-cog me-1"></i>ç®¡ç†é¢æ¿
                </a>
                <button class="btn btn-sm btn-outline-danger" id="logoutBtn">
                    <i class="fas fa-sign-out-alt me-1"></i>é€€å‡º
                </button>
            </div>
        </div>
    </div>
</div>

<!-- æœªç™»å½•çŠ¶æ€çš„å¯¼èˆªæ  -->
<div class="user-navbar d-none" th:unless="${isLoggedIn}" id="guestNavbar">
    <div class="container">
        <div class="d-flex justify-content-end align-items-center">
            <a href="/login" class="btn btn-sm btn-outline-light me-2">
                <i class="fas fa-sign-in-alt me-1"></i>ç™»å½•
            </a>
            <a href="/register" class="btn btn-sm btn-outline-light">
                <i class="fas fa-user-plus me-1"></i>æ³¨å†Œ
            </a>
        </div>
    </div>
</div>

<!-- ä¸»é¢˜åˆ‡æ¢å™¨ -->
<div class="theme-switcher">
    <button class="theme-toggle-btn" id="themeToggle">
        <i class="fas fa-leaf"></i>
        <span class="theme-badge" id="themeBadge">æ™®é€š</span>
    </button>
</div>

<!-- çƒŸèŠ±å®¹å™¨ -->
<div id="fireflakes"></div>

<!-- é¦–é¡µä¸»ä½“ -->
<section class="hero-section">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6 mb-4 mb-lg-0">
                <h1 class="display-3 fw-bold mb-3">å¥åº·æ˜Ÿçƒ</h1>
                <p class="lead mb-4">è®°å½•æ¯ä¸€æ¬¡è¿åŠ¨ï¼Œç§¯ç´¯å¥åº·è¶³è¿¹ï¼Œè§£é”ç‹¬ç‰¹å¾½ç« ï¼Œä¸å¥½å‹ä¸€èµ·æ‰“é€ å¥åº·ç”Ÿæ´»ï¼</p>
                <div class="d-flex flex-wrap gap-3" th:if="${!isLoggedIn}">
                    <a href="/login" class="btn btn-light btn-lg" id="loginBtn">
                        <i class="fas fa-sign-in-alt me-2"></i>ç”¨æˆ·ç™»å½•
                    </a>
                    <a href="/register" class="btn btn-outline-light btn-lg" id="registerBtn">
                        <i class="fas fa-user-plus me-2"></i>æ³¨å†Œè´¦å·
                    </a>
                    <a href="/admin/login" class="btn btn-outline-warning btn-lg">
                        <i class="fas fa-lock me-2"></i>ç®¡ç†å‘˜ç™»å½•
                    </a>
                </div>
                <div class="d-flex flex-wrap gap-3" th:if="${isLoggedIn}">
                    <a href="/dashboard" class="btn btn-light btn-lg">
                        <i class="fas fa-tachometer-alt me-2"></i>æˆ‘çš„ä»ªè¡¨æ¿
                    </a>
                    <a href="/newyear" class="btn btn-outline-light btn-lg">
                        <i class="fas fa-gift me-2"></i>æ–°å¹´æ´»åŠ¨
                    </a>
                </div>
            </div>
            <div class="col-lg-6">
                <!-- è½®æ’­å›¾éƒ¨åˆ† -->
                <div id="mainCarousel" class="carousel slide" data-bs-ride="carousel">
                    <div class="carousel-indicators">
                        <button type="button" data-bs-target="#mainCarousel" data-bs-slide-to="0"
                                class="active"></button>
                        <button type="button" data-bs-target="#mainCarousel" data-bs-slide-to="1"></button>
                        <button type="button" data-bs-target="#mainCarousel" data-bs-slide-to="2"></button>
                    </div>
                    <div class="carousel-inner">
                        <!-- å¹»ç¯ç‰‡1: æ¬¢è¿é¡µ -->
                        <div class="carousel-item active">
                            <div class="d-flex align-items-center justify-content-center h-100"
                                 style="background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('/static/images/loginimage/liveone.jpg') center/cover;">
                                <div class="text-center text-white p-4">
                                    <h1 class="display-3 fw-bold mb-3">æ¬¢è¿æ¥åˆ°å¥åº·æ˜Ÿçƒ</h1>
                                    <p class="lead mb-4">æ”¶é›†å¾½ç« ï¼Œç‚¹äº®ä½ çš„å¾½ç« å¢™ï¼å¼€å¯ä¸“å±å¥åº·ä¹‹æ—…</p>
                                    <a href="/behavior" class="btn btn-lg btn-warning px-5 py-3">
                                        <i class="fas fa-gift me-2"></i>å¼€å¯å¥åº·ä¹‹æ—…
                                    </a>
                                </div>
                            </div>
                        </div>

                        <!-- å¹»ç¯ç‰‡2: æˆå°±å±•ç¤º -->
                        <div class="carousel-item">
                            <div class="d-flex align-items-center justify-content-center h-100"
                                 style="background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('/static/images/loginimage/liveone.jpg') center/cover;">
                                <div class="container">
                                    <div class="row align-items-center">
                                        <div class="col-md-6">
                                            <h2 class="display-4 fw-bold mb-4">ç‚¹äº®ä½ çš„æˆå°±å¾½ç« </h2>
                                            <p class="lead mb-4">
                                                æ¯å®Œæˆä¸€ä¸ªå¥åº·ç›®æ ‡ï¼Œå°±ä¸ºä½ çš„å¾½ç« å¢™ç‚¹äº®ä¸€æšé—ªäº®çš„å¾½ç« ï¼</p>
                                            <div class="achievement-stats">
                                                <div class="row text-center">
                                                    <div class="col-4">
                                                        <h3 class="text-warning" id="badgeTypeCount">12</h3>
                                                        <p>å¾½ç« ç±»å‹</p>
                                                    </div>
                                                    <div class="col-4">
                                                        <h3 class="text-warning" id="totalBadgeCount">356+</h3>
                                                        <p>å·²ç‚¹äº®å¾½ç« </p>
                                                    </div>
                                                    <div class="col-4">
                                                        <h3 class="text-warning">24/7</h3>
                                                        <p>å…¨å¤©è®°å½•</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="badge-preview d-flex justify-content-center flex-wrap">
                                                <div class="badge-icon m-2" style="background: var(--newyear-gold);">
                                                    <i class="fas fa-running fa-2x"></i>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- å¹»ç¯ç‰‡3: æ–°å¹´æ´»åŠ¨ -->
                        <div class="carousel-item new-year-slide">
                            <div class="d-flex align-items-center justify-content-center h-100 text-white">
                                <div class="text-center">
                                    <h2 class="display-4 fw-bold mb-4"> 2025æ–°å¹´å¥åº·æŒ‘æˆ˜ </h2>
                                    <p class="lead mb-4">åŠ å…¥æˆ‘ä»¬çš„æ–°å¹´ç‰¹åˆ«æ´»åŠ¨ï¼Œå¼€å¯å¥åº·æ–°ç¯‡ç« ï¼</p>

                                    <div class="countdown-timer">
                                        <div class="countdown-item">
                                            <div class="countdown-value" id="days">12</div>
                                            <div class="countdown-label">å¤©</div>
                                        </div>
                                        <div class="countdown-item">
                                            <div class="countdown-value" id="hours">06</div>
                                            <div class="countdown-label">æ—¶</div>
                                        </div>
                                        <div class="countdown-item">
                                            <div class="countdown-value" id="minutes">45</div>
                                            <div class="countdown-label">åˆ†</div>
                                        </div>
                                        <div class="countdown-item">
                                            <div class="countdown-value" id="seconds">30</div>
                                            <div class="countdown-label">ç§’</div>
                                        </div>
                                    </div>

                                    <a href="/newyear" class="btn btn-light btn-lg px-5 py-3">
                                        <i class="fas fa-play me-2"></i>ç«‹å³å‚ä¸
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <button class="carousel-control-prev" type="button" data-bs-target="#mainCarousel"
                            data-bs-slide="prev">
                        <span class="carousel-control-prev-icon"></span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#mainCarousel"
                            data-bs-slide="next">
                        <span class="carousel-control-next-icon"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- å¾½ç« åº“åŒºåŸŸ -->
<section id="badgeLibrary" class="py-5">
    <div class="container">
        <h3 class="text-center mb-4">ğŸŒŸ æˆ‘çš„å¾½ç« åº“</h3>
        <div class="badge-collection">
            <div class="row" id="badgeCollection">
                <!-- å¾½ç« å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
                <div class="col-12 text-center" th:if="${isLoggedIn}">
                    <p class="text-white">æ¬¢è¿å›æ¥ï¼Œ<span th:text="${currentUser.username}">ç”¨æˆ·</span>ï¼å¾½ç« æ•°æ®å°†åŠ¨æ€åŠ è½½...</p>
                </div>
                <div class="col-12 text-center" th:unless="${isLoggedIn}">
                    <p class="text-white">è¯·ç™»å½•ä»¥æŸ¥çœ‹æ‚¨çš„å¾½ç« </p>
                    <a href="/login" class="btn btn-primary">ç«‹å³ç™»å½•</a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- åŠŸèƒ½åŒºåŸŸ -->
<section class="feature-section bg-dark">
    <div class="container">
        <h3 class="text-center mb-5">ğŸš€ å¿«é€Ÿå¼€å§‹</h3>
        <div class="row g-4">
            <div class="col-md-4">
                <div class="feature-card text-center">
                    <div class="feature-icon mb-3">
                        <i class="fas fa-running fa-3x text-success"></i>
                    </div>
                    <h4>è®°å½•è¿åŠ¨</h4>
                    <p class="text-muted">è®°å½•æ¯ä¸€æ¬¡è¿åŠ¨ï¼Œç§¯ç´¯å¥åº·è¶³è¿¹</p>
                    <a href="/behavior" class="btn btn-outline-success mt-3" th:if="${isLoggedIn}">
                        <i class="fas fa-plus me-2"></i>å¼€å§‹è®°å½•
                    </a>
                    <a href="/login" class="btn btn-outline-success mt-3" th:unless="${isLoggedIn}">
                        <i class="fas fa-sign-in me-2"></i>ç™»å½•è®°å½•
                    </a>
                </div>
            </div>

            <div class="col-md-4">
                <div class="feature-card text-center">
                    <div class="feature-icon mb-3">
                        <i class="fas fa-trophy fa-3x text-warning"></i>
                    </div>
                    <h4>æŒ‘æˆ˜ä»»åŠ¡</h4>
                    <p class="text-muted">å®Œæˆç‰¹åˆ«æŒ‘æˆ˜ï¼Œè§£é”ç¨€æœ‰å¾½ç« </p>
                    <a href="/newyear" class="btn btn-outline-warning mt-3">
                        <i class="fas fa-flag me-2"></i>æŸ¥çœ‹æŒ‘æˆ˜
                    </a>
                </div>
            </div>

            <div class="col-md-4">
                <div class="feature-card text-center">
                    <div class="feature-icon mb-3">
                        <i class="fas fa-users fa-3x text-info"></i>
                    </div>
                    <h4>ç¤¾åŒºåŠ¨æ€</h4>
                    <p class="text-muted">çœ‹çœ‹æœ‹å‹ä»¬çš„æˆå°±å’Œè¿›åº¦</p>
                    <a href="/login" class="btn btn-outline-info mt-3" th:if="${!isLoggedIn}">
                        <i class="fas fa-share-alt me-2"></i>åŠ å…¥ç¤¾åŒº
                    </a>
                    <a href="/dashboard" class="btn btn-outline-info mt-3" th:if="${isLoggedIn}">
                        <i class="fas fa-share-alt me-2"></i>ç¤¾åŒºåŠ¨æ€
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- é¡µè„š -->
<footer class="footer text-center">
    <div class="container">
        <div class="row">
            <div class="col-lg-4 mb-4">
                <h5><i class="fas fa-tree me-2 text-success"></i>å¥åº·æ˜Ÿçƒ</h5>
                <p class="text-muted">è®©è¿åŠ¨å˜å¾—æœ‰è¶£ï¼Œè®©å¥åº·æˆä¸ºä¹ æƒ¯</p>
            </div>
            <div class="col-lg-4 mb-4">
                <h5>å¿«é€Ÿé“¾æ¥</h5>
                <div class="d-flex justify-content-center flex-wrap">
                    <a href="#badgeLibrary" class="text-decoration-none text-muted me-3">å¾½ç« åº“</a>
                    <a href="/dashboard" class="text-decoration-none text-muted me-3">æ•°æ®ç»Ÿè®¡</a>
                    <a href="/achievements" class="text-decoration-none text-muted">æˆå°±ç³»ç»Ÿ</a>
                </div>
            </div>
            <div class="col-lg-4 mb-4">
                <h5>è”ç³»æˆ‘ä»¬</h5>
                <div class="social-links">
                    <a href="#" class="text-warning me-3"><i class="fab fa-weixin fa-2x"></i></a>
                    <a href="#" class="text-warning me-3"><i class="fab fa-weibo fa-2x"></i></a>
                    <a href="#" class="text-warning"><i class="fas fa-envelope fa-2x"></i></a>
                </div>
            </div>
        </div>
        <hr class="my-4" style="border-color: rgba(255,255,255,0.1);">
        <p class="text-muted">&copy; 2026 å¥åº·æ˜Ÿçƒ. ä¿ç•™æ‰€æœ‰æƒåˆ©.</p>
    </div>
</footer>

<!-- è¿”å›é¡¶éƒ¨æŒ‰é’® -->
<button class="back-to-top" id="backToTop">
    <i class="fas fa-arrow-up"></i>
</button>

<script src="/libs/bootstrap/5.3.0/bootstrap.bundle.min.js"></script>

<!-- æ¨¡å—åŒ–JSæ–‡ä»¶ -->
<script src="/js/modules/config-manager.js"></script>
<script src="/js/modules/api-service.js"></script>
<script src="/js/modules/theme-manager.js"></script>
<script src="/js/modules/ui-components.js"></script>
<script src="/js/modules/countdown-timer.js"></script>
<script src="/js/modules/main-app.js"></script>

<script>
    // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–åº”ç”¨
    document.addEventListener('DOMContentLoaded', function () {
        // åˆå§‹åŒ–ä¸»é¡µåº”ç”¨
        if (typeof HealthPlanetApp !== 'undefined') {
            window.app = new HealthPlanetApp();
        }

        // ç»‘å®šè¿”å›é¡¶éƒ¨æŒ‰é’®äº‹ä»¶
        const backToTopButton = document.getElementById('backToTop');
        if (backToTopButton) {
            // æ»šåŠ¨æ—¶æ£€æŸ¥æ˜¯å¦æ˜¾ç¤ºè¿”å›é¡¶éƒ¨æŒ‰é’®
            window.addEventListener('scroll', function () {
                if (window.scrollY > 300) {
                    backToTopButton.classList.add('visible');
                } else {
                    backToTopButton.classList.remove('visible');
                }
            });

            // ç‚¹å‡»è¿”å›é¡¶éƒ¨
            backToTopButton.addEventListener('click', function () {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });
        }

        // åˆå§‹åŒ–ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½ - ç¡®ä¿ä¸HealthPlanetAppç±»åŒæ­¥
        if (window.app && window.app.themeManager) {
            // å¦‚æœHealthPlanetAppå·²åˆå§‹åŒ–ï¼Œä½¿ç”¨å…¶ä¸»é¢˜ç®¡ç†å™¨
            window.app.themeManager.updateThemeUI();
        } else {
            // å¦åˆ™ï¼Œæ‰‹åŠ¨åˆå§‹åŒ–ä¸»é¢˜æ˜¾ç¤º
            const themeToggle = document.getElementById('themeToggle');
            if (themeToggle) {
                // åˆå§‹åŒ–ä¸»é¢˜æ˜¾ç¤ºï¼ˆä»æœ¬åœ°å­˜å‚¨æˆ–é»˜è®¤ï¼‰
                const savedTheme = localStorage.getItem('healthPlanetTheme') || 'normal';

                // ç¡®ä¿ä¸»é¢˜ç±»æ­£ç¡®åº”ç”¨
                document.body.classList.remove('normal-theme', 'new-year-theme');
                if (savedTheme === 'new-year') {
                    document.body.classList.add('new-year-theme');
                    themeToggle.innerHTML = '<i class="fas fa-fire"></i><span class="theme-badge">æ–°å¹´</span>';
                } else {
                    document.body.classList.add('normal-theme');
                    themeToggle.innerHTML = '<i class="fas fa-leaf"></i><span class="theme-badge">ç»¿è‰²</span>';
                }
            }
        }
    });

    // å€’è®¡æ—¶åŠŸèƒ½
    let indexCountdown;
    
    function initIndexCountdown() {
        // ä½¿ç”¨æ¨¡å—åŒ–çš„å€’è®¡æ—¶ç»„ä»¶ï¼Œé¿å…ä¸é¡µé¢å…¶ä»–å€’è®¡æ—¶å†²çª
        if (window.NewYearCountdown) {
            indexCountdown = new NewYearCountdown('2026-01-01T00:00:00', 'countdownContainer');
            
            // è®¾ç½®å€’è®¡æ—¶å®Œæˆå›è°ƒ
            indexCountdown.setOnComplete(() => {
                console.log('å€’è®¡æ—¶ç»“æŸ');
            });
            
            // é‡å†™æ›´æ–°DOMçš„æ–¹æ³•ï¼Œä¸“é—¨é’ˆå¯¹é¦–é¡µçš„å€’è®¡æ—¶å…ƒç´ 
            const originalUpdateDOM = indexCountdown.updateDOMElements;
            indexCountdown.updateDOMElements = (days, hours, minutes, seconds) => {
                // åªæ›´æ–°é¦–é¡µè½®æ’­å›¾ä¸­çš„å€’è®¡æ—¶å…ƒç´ 
                const daysEl = document.querySelector('.new-year-slide #days');
                const hoursEl = document.querySelector('.new-year-slide #hours');
                const minutesEl = document.querySelector('.new-year-slide #minutes');
                const secondsEl = document.querySelector('.new-year-slide #seconds');

                if (daysEl) daysEl.textContent = String(days).padStart(2, '0');
                if (hoursEl) hoursEl.textContent = String(hours).padStart(2, '0');
                if (minutesEl) minutesEl.textContent = String(minutes).padStart(2, '0');
                if (secondsEl) secondsEl.textContent = String(seconds).padStart(2, '0');
            };
            
            indexCountdown.start();
        }
    }
    
    // åœ¨é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–å€’è®¡æ—¶
    document.addEventListener('DOMContentLoaded', function() {
        initIndexCountdown();
    });

    // è½®æ’­å›¾åˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', function () {
        const carouselElement = document.getElementById('mainCarousel');
        if (carouselElement) {
            const carousel = new bootstrap.Carousel(carouselElement, {
                interval: 5000,
                ride: 'carousel',
                wrap: true,
                touch: true
            });

            // é”®ç›˜æ§åˆ¶
            document.addEventListener('keydown', function (e) {
                if (e.key === 'ArrowLeft') {
                    carousel.prev();
                } else if (e.key === 'ArrowRight') {
                    carousel.next();
                }
            });

            // è§¦æ‘¸æ»‘åŠ¨æ”¯æŒ
            let touchStartX = 0;
            let touchEndX = 0;
            carouselElement.addEventListener('touchstart', function (e) {
                touchStartX = e.changedTouches[0].screenX;
            }, false);
            carouselElement.addEventListener('touchend', function (e) {
                touchEndX = e.changedTouches[0].screenX;
                handleSwipe();
            }, false);

            function handleSwipe() {
                if (touchEndX < touchStartX - 50) {
                    carousel.next();
                }
                if (touchEndX > touchStartX + 50) {
                    carousel.prev();
                }
            }
        }
    });
    
    // æ·»åŠ å…¨å±€å‡½æ•°æ¥å¤„ç†ç™»å½•çŠ¶æ€å˜åŒ–
    function updatePageAuthStatus() {
        // å¦‚æœHealthPlanetAppå­˜åœ¨ï¼Œè°ƒç”¨å…¶è®¤è¯æ£€æŸ¥æ–¹æ³•
        if (window.app && typeof window.app.checkUserAuth === 'function') {
            window.app.checkUserAuth();
        }
    }

    // ç›‘å¬è‡ªå®šä¹‰äº‹ä»¶ï¼Œä»¥ä¾¿åœ¨ç™»å½•æˆåŠŸæ—¶æ›´æ–°é¡µé¢
    document.addEventListener('userLoginSuccess', function() {
        updatePageAuthStatus();
    });
</script>
</body>
</html>